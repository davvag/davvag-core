THREE.MTLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,a,r,e){var s=this,i=new THREE.FileLoader(this.manager);i.setPath(this.path),i.load(t,function(t){a(s.parse(t))},r,e)},setPath:function(t){return this.path=t,this},setTexturePath:function(t){return this.texturePath=t,this},setBaseUrl:function(t){return console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t){for(var a=t.split("\n"),r={},e=/\s+/,s={},i=0;i<a.length;i++){var o=a[i];if(0!==(o=o.trim()).length&&"#"!==o.charAt(0)){var n=o.indexOf(" "),h=n>=0?o.substring(0,n):o;h=h.toLowerCase();var p=n>=0?o.substring(n+1):"";if(p=p.trim(),"newmtl"===h)r={name:p},s[p]=r;else if(r)if("ka"===h||"kd"===h||"ks"===h){var l=p.split(e,3);r[h]=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])]}else r[h]=p}}var c=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return c.setCrossOrigin(this.crossOrigin),c.setManager(this.manager),c.setMaterials(s),c}},THREE.MTLLoader.MaterialCreator=function(t,a){this.baseUrl=t||"",this.options=a,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var a={};for(var r in t){var e=t[r],s={};for(var i in a[r]=s,e){var o=!0,n=e[i],h=i.toLowerCase();switch(h){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(n=[n[0]/255,n[1]/255,n[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===n[0]&&0===n[1]&&0===n[2]&&(o=!1)}o&&(s[h]=n)}}return a},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var a in this.materialsInfo)this.materialsArray[t]=this.create(a),this.nameLookup[a]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var a=this,r=this.materialsInfo[t],e={name:t,side:this.side};function s(t,r){if(!e[t]){var s,i,o=a.getTextureParams(r,e),n=a.loadTexture((s=a.baseUrl,"string"!=typeof(i=o.url)||""===i?"":/^https?:\/\//i.test(i)?i:s+i));n.repeat.copy(o.scale),n.offset.copy(o.offset),n.wrapS=a.wrap,n.wrapT=a.wrap,e[t]=n}}for(var i in r){var o,n=r[i];if(""!==n)switch(i.toLowerCase()){case"kd":e.color=(new THREE.Color).fromArray(n);break;case"ks":e.specular=(new THREE.Color).fromArray(n);break;case"map_kd":s("map",n);break;case"map_ks":s("specularMap",n);break;case"norm":s("normalMap",n);break;case"map_bump":case"bump":s("bumpMap",n);break;case"ns":e.shininess=parseFloat(n);break;case"d":(o=parseFloat(n))<1&&(e.opacity=o,e.transparent=!0);break;case"tr":o=parseFloat(n),this.options&&this.options.invertTrProperty&&(o=1-o),o>0&&(e.opacity=1-o,e.transparent=!0)}}return this.materials[t]=new THREE.MeshPhongMaterial(e),this.materials[t]},getTextureParams:function(t,a){var r,e={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},s=t.split(/\s+/);return(r=s.indexOf("-bm"))>=0&&(a.bumpScale=parseFloat(s[r+1]),s.splice(r,2)),(r=s.indexOf("-s"))>=0&&(e.scale.set(parseFloat(s[r+1]),parseFloat(s[r+2])),s.splice(r,4)),(r=s.indexOf("-o"))>=0&&(e.offset.set(parseFloat(s[r+1]),parseFloat(s[r+2])),s.splice(r,4)),e.url=s.join(" ").trim(),e},loadTexture:function(t,a,r,e,s){var i,o=THREE.Loader.Handlers.get(t),n=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===o&&(o=new THREE.TextureLoader(n)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),i=o.load(t,r,e,s),void 0!==a&&(i.mapping=a),i}};